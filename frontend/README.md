# Insurance Co-Pilot Frontend

This is the frontend application for the Insurance Co-Pilot system, built with React + TypeScript + Vite.

## Setup

1. Install dependencies:
   ```bash
   npm install
   ```

2. Make sure the backend is running (see backend README for setup)

3. Start the development server:
   ```bash
   npm run dev
   ```

## Features

- **OpenAI Realtime API Integration**: Real-time voice conversation with AI assistant
- **Voice Recognition**: Capture and process audio input from users
- **Audio Playback**: Stream audio responses from the AI assistant
- **Text Input**: Fallback text input option
- **Real-time Status**: Live connection status and recording indicators

## OpenAI Agents SDK Integration

This application now uses the **official OpenAI Agents SDK** for seamless Realtime API integration. The implementation includes:

### ‚úÖ **Key Features:**
- **ü§ñ Intelligent Agent**: Uses `RealtimeAgent` with custom tools for collecting insurance information
- **üîê Secure Authentication**: Ephemeral client secrets generated by backend (secure browser implementation)
- **üéôÔ∏è Automatic Audio Handling**: WebRTC connection with built-in microphone and speaker management
- **üõ†Ô∏è Custom Tools**: Agent can call `collect_customer_info` tool to store gathered data
- **üìù Real-time Transcription**: Automatic speech-to-text and text-to-speech
- **üîÑ Session Management**: Simplified connection and state management

### üèóÔ∏è **Architecture:**

```javascript
// Agent with custom tools
const agent = new RealtimeAgent({
  name: 'Insurance Assistant',
  instructions: 'Collect customer info for roadside assistance...',
  tools: [collectInfoTool],
});

// Session management
const session = new RealtimeSession(agent, {
  model: 'gpt-realtime',
});

// Secure connection
await session.connect({ apiKey: ephemeral_client_secret });
```

### üõ†Ô∏è **Custom Tools:**
- **`collect_customer_info`**: Stores name, location, and issue description
- **Real-time State Updates**: Updates React state and localStorage automatically
- **Completion Detection**: Sets `ready_for_dispatch` when all info is collected

### üéØ **Benefits over Manual Implementation:**
- **‚úÖ 90% less code** - SDK handles all WebRTC complexity
- **‚úÖ Automatic audio processing** - No manual MediaRecorder setup
- **‚úÖ Built-in error handling** - Robust connection management
- **‚úÖ Tool integration** - Easy function calling with type safety
- **‚úÖ Better UX** - Seamless voice interactions

---

Original Vite Template Info:

Currently, two official plugins are available:

- [@vitejs/plugin-react](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react) uses [Babel](https://babeljs.io/) for Fast Refresh
- [@vitejs/plugin-react-swc](https://github.com/vitejs/vite-plugin-react/blob/main/packages/plugin-react-swc) uses [SWC](https://swc.rs/) for Fast Refresh

## Expanding the ESLint configuration

If you are developing a production application, we recommend updating the configuration to enable type-aware lint rules:

```js
export default tseslint.config([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...

      // Remove tseslint.configs.recommended and replace with this
      ...tseslint.configs.recommendedTypeChecked,
      // Alternatively, use this for stricter rules
      ...tseslint.configs.strictTypeChecked,
      // Optionally, add this for stylistic rules
      ...tseslint.configs.stylisticTypeChecked,

      // Other configs...
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```

You can also install [eslint-plugin-react-x](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-x) and [eslint-plugin-react-dom](https://github.com/Rel1cx/eslint-react/tree/main/packages/plugins/eslint-plugin-react-dom) for React-specific lint rules:

```js
// eslint.config.js
import reactX from 'eslint-plugin-react-x'
import reactDom from 'eslint-plugin-react-dom'

export default tseslint.config([
  globalIgnores(['dist']),
  {
    files: ['**/*.{ts,tsx}'],
    extends: [
      // Other configs...
      // Enable lint rules for React
      reactX.configs['recommended-typescript'],
      // Enable lint rules for React DOM
      reactDom.configs.recommended,
    ],
    languageOptions: {
      parserOptions: {
        project: ['./tsconfig.node.json', './tsconfig.app.json'],
        tsconfigRootDir: import.meta.dirname,
      },
      // other options...
    },
  },
])
```
